{"version":3,"file":"index.js","sources":["../dist-src/schemas/schema.js","../dist-src/schemas/primative.js","../dist-src/schemas/string.js","../dist-src/schemas/object.js","../dist-src/schemas/array.js","../dist-src/schemas/number.js","../dist-src/schemas/boolean.js"],"sourcesContent":["export default class Schema {\r\n    constructor() {\r\n        this.validationRules = [];\r\n    }\r\n    addRule(rule) {\r\n        this.validationRules.push(rule);\r\n        return this;\r\n    }\r\n}\r\n//# sourceMappingURL=schema.js.map","import Schema from './schema';\r\nexport default class PrimativeSchema extends Schema {\r\n    required(message = 'This field is required') {\r\n        return this.addRule(input => {\r\n            if (input === undefined || input === null) {\r\n                return message;\r\n            }\r\n        });\r\n    }\r\n    validate(input) {\r\n        return this.validationRules.map(rule => {\r\n            const error = rule(input);\r\n            return error;\r\n        }).filter(res => res !== undefined);\r\n    }\r\n}\r\n//# sourceMappingURL=primative.js.map","import PrimativeSchema from './primative';\r\nexport default class StringSchema extends PrimativeSchema {\r\n    constructor() {\r\n        super();\r\n        this.addRule(input => {\r\n            if (input === undefined || input === null) {\r\n                return;\r\n            }\r\n            if (typeof input !== \"string\") {\r\n                return `Expected typeof \\`string\\` not \\`${typeof input}\\``;\r\n            }\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=string.js.map","import Schema from './schema';\r\nexport default class ObjectSchema extends Schema {\r\n    constructor(shape) {\r\n        super();\r\n        this.shape = shape;\r\n        this.addRule(input => {\r\n            if (input === undefined || input === null) {\r\n                return;\r\n            }\r\n            if (typeof input !== \"object\") {\r\n                return `Expected typeof \\`object\\` not \\`${typeof input}\\``;\r\n            }\r\n        });\r\n    }\r\n    required(message = 'This field is required') {\r\n        return this.addRule(input => {\r\n            if (input === undefined || input === null) {\r\n                return message;\r\n            }\r\n        });\r\n    }\r\n    strict(message) {\r\n        return this.addRule(input => {\r\n            const invalidKeys = Object.keys(input).filter(key => !(key in this.shape));\r\n            if (invalidKeys.length > 0) {\r\n                return message || `Keys \\`${invalidKeys.join(', ')}\\` do not match the shape.`;\r\n            }\r\n        });\r\n    }\r\n    validate(input) {\r\n        const errors = this.validationRules\r\n            .map(rule => rule(input))\r\n            .filter(res => res !== undefined);\r\n        if (errors.length > 0) {\r\n            return errors;\r\n        }\r\n        if (input === undefined) {\r\n            return [];\r\n        }\r\n        const errorMap = Object.entries(this.shape)\r\n            // .filter(([key, value]) => value !== undefined)\r\n            .map(([key, value]) => [key, value.validate(Reflect.get(input, key))])\r\n            .filter(([key, value]) => !(Array.isArray(value) && value.length === 0))\r\n            .filter(([key, value]) => value !== undefined);\r\n        if (errorMap.length === 0) {\r\n            return [];\r\n        }\r\n        else {\r\n            return [Object.fromEntries(errorMap)];\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=object.js.map","import PrimativeSchema from './primative';\r\nexport default class ArraySchema extends PrimativeSchema {\r\n    constructor() {\r\n        super();\r\n        this.addRule(input => {\r\n            if (input === undefined || input === null) {\r\n                return;\r\n            }\r\n            if (!Array.isArray(input)) {\r\n                return `Expected input to be an Array`;\r\n            }\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=array.js.map","import PrimativeSchema from './primative';\r\nexport default class NumberSchema extends PrimativeSchema {\r\n    constructor() {\r\n        super();\r\n        this.addRule(input => {\r\n            if (input === undefined || input === null) {\r\n                return;\r\n            }\r\n            if (typeof input !== \"number\") {\r\n                return `Expected typeof \\`number\\` not \\`${typeof input}\\``;\r\n            }\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=number.js.map","import PrimativeSchema from './primative';\r\nexport default class BooleanSchema extends PrimativeSchema {\r\n    constructor() {\r\n        super();\r\n        this.addRule(input => {\r\n            if (input === undefined || input === null) {\r\n                return;\r\n            }\r\n            if (typeof input !== \"boolean\") {\r\n                return `Expected typeof \\`boolean\\` not \\`${typeof input}\\``;\r\n            }\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=boolean.js.map"],"names":[],"mappings":"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"}